<section class="page">
 

  <!-- content card behind legend + KPIs (light strip) -->
   
  <section class="page__content-card">
    <!-- KPI + legend row -->
     
    <section class="page__kpi-bar">
      
      <div class="page__kpi-inner">
        
        <!-- LEFT: legend card with progress bar -->
        <div class="page__legend-column">
          
          <div class="legend">
            
            <!-- multiâ€‘color progress bar -->
            <div class="legend__bar">
  <div class="legend__segment legend__segment--dirty" style="flex: 20">
    <span class="legend__percent">20%</span>
  </div>
  <div class="legend__segment legend__segment--inprogress" style="flex: 14">
    <span class="legend__percent">14%</span>
  </div>
  <div class="legend__segment legend__segment--cleaned" style="flex: 52">
    <span class="legend__percent">52%</span>
  </div>
  <div class="legend__segment legend__segment--inspect" style="flex: 10">
    <span class="legend__percent">10%</span>
  </div>
  <div class="legend__segment legend__segment--out" style="flex: 3">
    <span class="legend__percent">3%</span>
  </div>
  <div class="legend__segment legend__segment--order" style="flex: 1">
    <span class="legend__percent">1%</span>
  </div>
</div>


            <!-- legend labels -->
            <div class="legend__labels">
              <div class="legend__item">
                <span class="legend__color legend__color--dirty"></span> Dirty
              </div>
              <div class="legend__item">
                <span class="legend__color legend__color--inprogress"></span> In Progress
              </div>
              <div class="legend__item">
                <span class="legend__color legend__color--inspect"></span> Inspect
              </div>
              <div class="legend__item">
                <span class="legend__color legend__color--cleaned"></span> Cleaned
              </div>
              <div class="legend__item">
                <span class="legend__color legend__color--out"></span> Out of Service
              </div>
              <div class="legend__item">
                <span class="legend__color legend__color--order"></span> Out of Order
              </div>
            </div>
          </div>
        </div>

        <!-- RIGHT: four KPI blocks -->
        @if (summary) {
          <div class="page__kpi-column">
            <div class="kpi-strip">
              <!-- Occupancy as a KPI card with donut -->
              <app-kpi-card
                class="kpi-strip__card"
                label="Occupancy"
                [value]="summary.occupancy.current + ' / ' + summary.occupancy.total"
                subLabel=""
              >
              
                <app-donut-chart kpi-icon [percent]="summary.occupancy.percent"></app-donut-chart>
                
              </app-kpi-card>

              <!-- Arrival -->
              <app-kpi-card
                class="kpi-strip__card"
                label="Arrival"
                [value]="summary.arrival.count.toString()"
                subLabel="{{ summary.arrival.delta >= 0 ? '+' : '' }}{{ summary.arrival.delta }}% from last week"
                >
              <img
    kpi-icon
    src="/header/arrival.png"
    alt="arrival"
    width="30"
    height="31"
    class="kpi-icon-img"
/>
              </app-kpi-card>

              <!-- Departure -->
              <app-kpi-card
                class="kpi-strip__card"
                label="Departure"
                [value]="summary.departure.count.toString()"
                subLabel="{{ summary.departure.delta >= 0 ? '+' : '' }}{{ summary.departure.delta }}% from last week"
              
                >
                <img
    kpi-icon
    src="/header/departure.png"
    alt="departure"
    width="30"
    height="31"
    class="kpi-icon-img"
/>
              
              </app-kpi-card>

              <!-- Guest Request -->
              <app-kpi-card
                class="kpi-strip__card"
                label="Guest Request"
                [value]="summary.guestRequest.count.toString()"
                subLabel="{{ summary.guestRequest.avgServiceTimeMinutes }} min Avg. service time"
              ><img
    kpi-icon
    src="/header/guestreq.png"
    alt="guest request"
    width="30"
    height="31"
    class="kpi-icon-img"
/></app-kpi-card>
            </div>
          </div>
        }
      </div>
    </section>
  </section>

  <!-- Floors grid -->
  <section class="page__floors">
    @for (floor of floors; track floor.id) {
      <app-floor-section [floor]="floor"></app-floor-section>
    } @empty {
      <p>No floors found.</p>
    }
  </section>
</section>
